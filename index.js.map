{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\n/*\nЦя функція повинна приймати один параметр query (пошукове слово, яке є рядком),\n здійснювати HTTP-запит і\n повертати значення властивості data з отриманої відповіді.\n */\nconst API_KEY = '52353709-9856f312e72a5e0829ceb9a35';\n\nexport default async function getImagesByQuery(query, per_page, page) {\n  const response = await axios('https://pixabay.com/api/', {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: per_page,\n      page: page,\n    },\n  });\n\n  return response.data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst galleryContainer = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader-container');\nconst moreBtn = document.querySelector('.more-btn');\n\nconst gallery = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n  overlayOpacity: 0.8,\n});\n\n/*\nЦя функція повинна приймати масив images, \nстворювати HTML-розмітку для галереї, \nдодавати її в контейнер галереї та \nвикликати метод екземпляра SimpleLightbox refresh(). \nНічого не повертає*/\nexport function createGallery(images) {\n  console.log(images);\n  const imgListItemCollection = [];\n\n  for (const {\n    webformatURL,\n    largeImageURL,\n    tags,\n    likes,\n    views,\n    comments,\n    downloads,\n  } of images) {\n    imgListItemCollection.push(`<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${largeImageURL}\">\n    <img\n      class=\"gallery-image\"\n      src=\"${webformatURL}\"\n      data-source=\"${largeImageURL}\"\n      alt=\"${tags}\"\n    />\n    <ul class=\"gallery-desc\">\n      <li class=\"gallery-desk-item\">\n        <p class=\"gallery-desk-key\">Likes</p>\n        <p class=\"gallery-desk-value\">${likes}</p>\n      </li>\n      <li class=\"gallery-desk-item\">\n        <p class=\"gallery-desk-key\">Views</p>\n        <p class=\"gallery-desk-value\">${views}</p>\n      </li>\n      <li class=\"gallery-desk-item\">\n        <p class=\"gallery-desk-key\">Comments</p>\n        <p class=\"gallery-desk-value\">${comments}</p>\n      </li>\n      <li class=\"gallery-desk-item\">\n        <p class=\"gallery-desk-key\">Downloads</p>\n        <p class=\"gallery-desk-value\">${downloads}</p>\n      </li>\n    </ul>\n  </a>\n</li>`);\n  }\n\n  galleryContainer.insertAdjacentHTML(\n    'beforeend',\n    imgListItemCollection.join('\\n')\n  );\n  gallery.refresh();\n\n  if (galleryContainer.childElementCount > 15) {\n    scroolOn2Rows();\n  }\n}\n\n/*\nЦя функція нічого не приймає та \nповинна очищати вміст контейнера галереї. \nНічого не повертає. */\nexport function clearGallery() {\n  galleryContainer.innerHTML = '';\n}\n\n/*\nЦя функція нічого не приймає, \nповинна додавати клас для відображення лоадера. \nНічого не повертає. */\nexport function showLoader() {\n  loader.classList.remove('is-hidden');\n}\n\n/*\nЦя функція нічого не приймає, \nповинна прибирати клас для відображення лоадера. \nНічого не повертає. */\nexport function hideLoader() {\n  loader.classList.add('is-hidden');\n}\n\nexport function showLoadMoreBtn() {\n  moreBtn.classList.remove('is-hidden');\n}\n\nexport function hideLoadMoreBtn() {\n  moreBtn.classList.add('is-hidden');\n}\n\nexport function scroolOn2Rows() {\n  window.scrollBy({\n    top: galleryContainer.firstChild.getBoundingClientRect().height * 2,\n    behavior: 'smooth',\n  });\n}\n","/*\nУ файлі main.js напиши всю логіку роботи додатка. \nВиклики нотифікацій iziToast, \nусі перевірки на довжину масиву в отриманій відповіді робимо саме в цьому файлі. \nІмпортуй в нього функції із файлів pixabay-api.js та render-functions.js \nта викликай їх у відповідний момент. */\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport getImagesByQuery from './js/pixabay-api';\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreBtn,\n  hideLoadMoreBtn,\n  scroolOn2Rows,\n} from './js/render-functions';\n\nconst PER_PAGE = 15;\n\nconst moreBtn = document.querySelector('.more-btn');\nconst form = document.querySelector('.form');\nlet response;\nlet images = [];\nlet page = 1;\nlet total;\nlet searchReq;\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n  clearGallery();\n  hideLoadMoreBtn();\n  searchReq = event.target.elements.searchText.value.trim();\n  if (!searchReq.length) {\n    showPopUp('Enter key words to search for images');\n    return;\n  }\n\n  showLoader();\n  try {\n    page = 1;\n    response = await getImagesByQuery(searchReq, PER_PAGE, page);\n    images = response.hits;\n    total = response.totalHits;\n\n    if (!images.length) {\n      showPopUp(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n      return;\n    }\n\n    page++;\n    createGallery(images);\n\n    if (page * PER_PAGE < total) {\n      showLoadMoreBtn();\n    }\n\n    if (images.length < 15) {\n      showPopUp(\"We're sorry, but you've reached the end of search results.\");\n      hideLoadMoreBtn();\n    }\n  } catch (error) {\n    showPopUp(error.message);\n  } finally {\n    hideLoader();\n  }\n});\n\nmoreBtn.addEventListener('click', async event => {\n  showLoader();\n  try {\n    response = await getImagesByQuery(searchReq, PER_PAGE, page);\n    images = response.hits;\n\n    createGallery(images);\n    // scroolOn2Rows();\n\n    if (!images.length) {\n      hideLoadMoreBtn();\n      showPopUp(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n      return;\n    }\n\n    if (page * PER_PAGE >= total) {\n      hideLoadMoreBtn();\n    }\n\n    page++;\n\n    if (images.length < 15) {\n      showPopUp(\"We're sorry, but you've reached the end of search results.\");\n    }\n  } catch (error) {\n    showPopUp(error.message);\n  } finally {\n    hideLoader();\n  }\n});\n\nfunction showPopUp(msg) {\n  iziToast.show({\n    message: msg,\n    position: 'topRight',\n    backgroundColor: '#EF4040',\n    messageColor: '#FFFFFF',\n    progressBarColor: '#B51B1B',\n    overlayColor: '#FFBEBE',\n  });\n}\n"],"names":["API_KEY","getImagesByQuery","query","per_page","page","axios","galleryContainer","loader","moreBtn","gallery","SimpleLightbox","createGallery","images","imgListItemCollection","webformatURL","largeImageURL","tags","likes","views","comments","downloads","scroolOn2Rows","clearGallery","showLoader","hideLoader","showLoadMoreBtn","hideLoadMoreBtn","PER_PAGE","form","response","total","searchReq","event","showPopUp","error","msg","iziToast"],"mappings":"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"}