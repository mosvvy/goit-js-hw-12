{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\n/*\nЦя функція повинна приймати один параметр query (пошукове слово, яке є рядком),\n здійснювати HTTP-запит і\n повертати значення властивості data з отриманої відповіді.\n */\nconst API_KEY = '52353709-9856f312e72a5e0829ceb9a35';\nconst PER_PAGE = 15;\nlet total_hits;\n\nexport default async function getImagesByQuery(query, page) {\n  const response = await axios('https://pixabay.com/api/', {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: PER_PAGE,\n      page: page,\n    },\n  });\n  total_hits = response.data.total_hits;\n\n  return response.data.hits;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst galleryContainer = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader-container');\nconst moreBtn = document.querySelector('.more-btn');\n\nconst gallery = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n  overlayOpacity: 0.8,\n});\n\n/*\nЦя функція повинна приймати масив images, \nстворювати HTML-розмітку для галереї, \nдодавати її в контейнер галереї та \nвикликати метод екземпляра SimpleLightbox refresh(). \nНічого не повертає*/\nexport function createGallery(images) {\n  console.log(images);\n  const imgListItemCollection = [];\n\n  for (const {\n    webformatURL,\n    largeImageURL,\n    tags,\n    likes,\n    views,\n    comments,\n    downloads,\n  } of images) {\n    imgListItemCollection.push(`<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${largeImageURL}\">\n    <img\n      class=\"gallery-image\"\n      src=\"${webformatURL}\"\n      data-source=\"${largeImageURL}\"\n      alt=\"${tags}\"\n    />\n    <ul class=\"gallery-desc\">\n      <li class=\"gallery-desk-item\">\n        <p class=\"gallery-desk-key\">Likes</p>\n        <p class=\"gallery-desk-value\">${likes}</p>\n      </li>\n      <li class=\"gallery-desk-item\">\n        <p class=\"gallery-desk-key\">Views</p>\n        <p class=\"gallery-desk-value\">${views}</p>\n      </li>\n      <li class=\"gallery-desk-item\">\n        <p class=\"gallery-desk-key\">Comments</p>\n        <p class=\"gallery-desk-value\">${comments}</p>\n      </li>\n      <li class=\"gallery-desk-item\">\n        <p class=\"gallery-desk-key\">Downloads</p>\n        <p class=\"gallery-desk-value\">${downloads}</p>\n      </li>\n    </ul>\n  </a>\n</li>`);\n  }\n\n  galleryContainer.insertAdjacentHTML(\n    'beforeend',\n    imgListItemCollection.join('\\n')\n  );\n  gallery.refresh();\n}\n\n/*\nЦя функція нічого не приймає та \nповинна очищати вміст контейнера галереї. \nНічого не повертає. */\nexport function clearGallery() {\n  galleryContainer.innerHTML = '';\n}\n\n/*\nЦя функція нічого не приймає, \nповинна додавати клас для відображення лоадера. \nНічого не повертає. */\nexport function showLoader() {\n  loader.classList.remove('is-hidden');\n}\n\n/*\nЦя функція нічого не приймає, \nповинна прибирати клас для відображення лоадера. \nНічого не повертає. */\nexport function hideLoader() {\n  loader.classList.add('is-hidden');\n}\n\nexport function showLoadMoreBtn() {\n  moreBtn.classList.remove('is-hidden');\n}\n\nexport function hideLoadMoreBtn() {\n  moreBtn.classList.add('is-hidden');\n}\n\nexport function scroolOn2Rows(page) {\n  window.scrollBy({\n    top: galleryContainer.firstChild.getBoundingClientRect().height * 2,\n    behavior: 'smooth',\n  });\n}\n","/*\nУ файлі main.js напиши всю логіку роботи додатка. \nВиклики нотифікацій iziToast, \nусі перевірки на довжину масиву в отриманій відповіді робимо саме в цьому файлі. \nІмпортуй в нього функції із файлів pixabay-api.js та render-functions.js \nта викликай їх у відповідний момент. */\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport getImagesByQuery from './js/pixabay-api';\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreBtn,\n  hideLoadMoreBtn,\n  scroolOn2Rows,\n} from './js/render-functions';\n\nconst moreBtn = document.querySelector('.more-btn');\nconst form = document.querySelector('.form');\nlet images = [];\nlet page = 1;\nlet searchReq;\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n  clearGallery();\n  hideLoadMoreBtn();\n  searchReq = event.target.elements.searchText.value.trim();\n  if (!searchReq.length) {\n    showPopUp('Enter key words to search for images');\n    return;\n  }\n\n  showLoader();\n  try {\n    page = 1;\n    images = await getImagesByQuery(searchReq, page);\n    page++;\n    hideLoader();\n    createGallery(images);\n    showLoadMoreBtn();\n\n    if (!images.length) {\n      hideLoadMoreBtn();\n      hideLoader();\n      showPopUp(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n      return;\n    }\n\n    if (images.length < 15) {\n      showPopUp(\"We're sorry, but you've reached the end of search results.\");\n      hideLoadMoreBtn();\n    }\n  } catch (error) {\n    showPopUp(error.message);\n  }\n});\n\nmoreBtn.addEventListener('click', async event => {\n  showLoader();\n  try {\n    images = await getImagesByQuery(searchReq, page);\n    page++;\n    hideLoader();\n    createGallery(images);\n    scroolOn2Rows(page);\n\n    if (images.length < 15) {\n      showPopUp(\"We're sorry, but you've reached the end of search results.\");\n      hideLoadMoreBtn();\n    }\n  } catch (error) {\n    showPopUp(error.message);\n  }\n});\n\nfunction showPopUp(msg) {\n  iziToast.show({\n    message: msg,\n    position: 'topRight',\n    backgroundColor: '#EF4040',\n    messageColor: '#FFFFFF',\n    progressBarColor: '#B51B1B',\n    overlayColor: '#FFBEBE',\n  });\n}\n"],"names":["API_KEY","PER_PAGE","getImagesByQuery","query","page","response","axios","galleryContainer","loader","moreBtn","gallery","SimpleLightbox","createGallery","images","imgListItemCollection","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreBtn","hideLoadMoreBtn","scroolOn2Rows","form","searchReq","event","showPopUp","error","msg","iziToast"],"mappings":"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"}